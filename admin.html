<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Portfolio Admin Panel</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=JetBrains+Mono:wght@300;400;500;700&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth}
body{font-family:'Syne',sans-serif;background:#0C0C0C;color:#F2EDE7;min-height:100vh}
:root{--accent:#F95C4B;--surface:#1A1A1A;--surface2:#252525;--border:rgba(242,237,231,.08);--mono:'JetBrains Mono',monospace}
/* SIDEBAR */
.layout{display:grid;grid-template-columns:260px 1fr;min-height:100vh}
.sidebar{background:var(--surface);border-right:1px solid var(--border);position:sticky;top:0;height:100vh;overflow-y:auto;display:flex;flex-direction:column}
.sidebar-logo{padding:1.5rem;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:.7rem}
.logo-icon{width:36px;height:36px;background:var(--accent);border-radius:10px;display:flex;align-items:center;justify-content:center;font-weight:900;font-family:var(--mono);font-size:.9rem;flex-shrink:0}
.logo-txt{font-weight:800;font-size:1rem}
.logo-sub{font-size:.65rem;font-family:var(--mono);opacity:.4;margin-top:1px}
.sidebar-nav{padding:1rem 0;flex:1}
.nav-section{padding:.3rem 1rem .2rem;font-family:var(--mono);font-size:.6rem;letter-spacing:3px;text-transform:uppercase;opacity:.35}
.nav-item{display:flex;align-items:center;gap:.7rem;padding:.55rem 1.2rem;cursor:pointer;transition:all .2s;font-size:.85rem;font-weight:600;color:rgba(242,237,231,.6);border-left:2px solid transparent;margin:1px 0}
.nav-item:hover{background:rgba(249,92,75,.08);color:#F2EDE7;border-left-color:var(--accent)}
.nav-item.active{background:rgba(249,92,75,.12);color:#F2EDE7;border-left-color:var(--accent)}
.nav-item .icon{font-size:.95rem;width:18px;text-align:center}
.sidebar-footer{padding:1rem 1.2rem;border-top:1px solid var(--border)}
.github-section{background:var(--surface2);border-radius:12px;padding:1rem;border:1px solid var(--border)}
.gh-title{font-size:.7rem;font-family:var(--mono);opacity:.5;text-transform:uppercase;letter-spacing:1px;margin-bottom:.6rem}
.gh-input{width:100%;background:#111;border:1px solid var(--border);border-radius:8px;padding:.5rem .7rem;color:#F2EDE7;font-family:var(--mono);font-size:.72rem;margin-bottom:.5rem;outline:none}
.gh-input:focus{border-color:var(--accent)}
.gh-input::placeholder{opacity:.3}
.gh-btn{width:100%;background:var(--accent);color:#fff;border:none;border-radius:8px;padding:.55rem;font-family:'Syne',sans-serif;font-weight:700;font-size:.8rem;cursor:pointer;transition:opacity .2s;display:flex;align-items:center;justify-content:center;gap:.4rem}
.gh-btn:hover{opacity:.9}
/* MAIN */
.main{display:flex;flex-direction:column;min-height:100vh}
.topbar{background:var(--surface);border-bottom:1px solid var(--border);padding:1rem 2rem;display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:100}
.topbar-title{font-size:1.1rem;font-weight:800}
.topbar-actions{display:flex;gap:.8rem;align-items:center}
.btn-save{background:var(--accent);color:#fff;border:none;border-radius:10px;padding:.5rem 1.2rem;font-family:'Syne',sans-serif;font-weight:700;font-size:.85rem;cursor:pointer;display:flex;align-items:center;gap:.4rem;transition:transform .2s,box-shadow .2s}
.btn-save:hover{transform:translateY(-1px);box-shadow:0 4px 15px rgba(249,92,75,.3)}
.btn-preview{background:transparent;color:#F2EDE7;border:1px solid var(--border);border-radius:10px;padding:.5rem 1.2rem;font-family:'Syne',sans-serif;font-weight:700;font-size:.85rem;cursor:pointer;transition:all .2s}
.btn-preview:hover{border-color:var(--accent);color:var(--accent)}
.content{flex:1;padding:2rem}
/* PANELS */
.panel{display:none}
.panel.active{display:block;animation:panelFade .3s ease}
@keyframes panelFade{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
/* FORM ELEMENTS */
.form-row{display:grid;grid-template-columns:1fr 1fr;gap:1.2rem;margin-bottom:1.2rem}
.form-row.single{grid-template-columns:1fr}
.form-group{display:flex;flex-direction:column;gap:.4rem}
.form-label{font-size:.7rem;font-family:var(--mono);opacity:.5;text-transform:uppercase;letter-spacing:1px}
.form-input,.form-textarea,.form-select{background:var(--surface);border:1.5px solid var(--border);border-radius:10px;padding:.65rem .9rem;color:#F2EDE7;font-family:'Syne',sans-serif;font-size:.9rem;outline:none;transition:border-color .2s}
.form-input:focus,.form-textarea:focus,.form-select:focus{border-color:var(--accent)}
.form-textarea{min-height:100px;resize:vertical;font-family:'Syne',sans-serif}
.form-select{cursor:pointer}
.form-select option{background:#1A1A1A}
/* CARDS in admin */
.admin-card{background:var(--surface);border:1px solid var(--border);border-radius:16px;padding:1.5rem;margin-bottom:1.2rem;position:relative}
.card-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:1.2rem;cursor:pointer}
.card-header-title{font-weight:700;font-size:.95rem;display:flex;align-items:center;gap:.6rem}
.card-actions{display:flex;gap:.5rem}
.btn-icon{background:rgba(249,92,75,.1);border:none;border-radius:8px;padding:.35rem .5rem;color:var(--accent);cursor:pointer;font-size:.8rem;transition:background .2s;font-family:var(--mono)}
.btn-icon:hover{background:rgba(249,92,75,.2)}
.btn-icon.delete{background:rgba(239,68,68,.1);color:#EF4444}
.btn-icon.delete:hover{background:rgba(239,68,68,.2)}
.btn-add{background:rgba(79,115,92,.15);color:#9FBD8A;border:1px dashed rgba(79,115,92,.4);border-radius:12px;padding:.7rem 1.2rem;font-family:'Syne',sans-serif;font-weight:700;font-size:.85rem;cursor:pointer;transition:all .2s;width:100%;display:flex;align-items:center;justify-content:center;gap:.4rem}
.btn-add:hover{background:rgba(79,115,92,.25);border-style:solid}
/* TAGS input */
.tags-input-wrap{display:flex;flex-wrap:wrap;gap:.4rem;background:var(--surface);border:1.5px solid var(--border);border-radius:10px;padding:.5rem .7rem;cursor:text}
.tag-pill{background:rgba(249,92,75,.15);color:#F95C4B;border-radius:6px;padding:.15rem .5rem;font-family:var(--mono);font-size:.72rem;display:flex;align-items:center;gap:.3rem}
.tag-remove{cursor:pointer;opacity:.7}
.tag-remove:hover{opacity:1}
.tags-text-input{background:none;border:none;outline:none;color:#F2EDE7;font-family:'Syne',sans-serif;font-size:.85rem;min-width:80px}
/* STATUS */
.status-bar{position:fixed;bottom:1.5rem;right:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:.7rem 1.2rem;font-size:.8rem;font-family:var(--mono);display:flex;align-items:center;gap:.5rem;opacity:0;transition:opacity .3s;pointer-events:none;z-index:9999}
.status-bar.show{opacity:1}
.status-dot{width:8px;height:8px;border-radius:50%;background:#4F735C}
/* THEME PREVIEW */
.theme-grid-admin{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem;margin-top:1rem}
.theme-swatch{border-radius:14px;padding:1.2rem;cursor:pointer;transition:transform .2s,box-shadow .2s;border:2px solid transparent;position:relative}
.theme-swatch:hover{transform:scale(1.02)}
.theme-swatch.selected{border-color:var(--accent);box-shadow:0 0 0 3px rgba(249,92,75,.2)}
.theme-swatch-name{font-weight:700;font-size:.85rem;margin-bottom:.3rem}
.theme-swatch-colors{display:flex;gap:.3rem}
.swatch-dot{width:16px;height:16px;border-radius:50%;border:1px solid rgba(255,255,255,.1)}
.theme-checkmark{position:absolute;top:.6rem;right:.6rem;font-size.8rem}
/* SECTION TITLE */
.panel-title{font-size:1.5rem;font-weight:800;margin-bottom:.3rem}
.panel-sub{font-size:.8rem;font-family:var(--mono);opacity:.4;margin-bottom:2rem}
/* Divider */
.divider{height:1px;background:var(--border);margin:1.5rem 0}
/* STAT CARDS */
.stat-row{display:grid;grid-template-columns:repeat(4,1fr);gap:1rem;margin-bottom:2rem}
.stat-card{background:var(--surface);border:1px solid var(--border);border-radius:14px;padding:1.2rem;text-align:center}
.sc-num{font-size:1.8rem;font-weight:800;color:var(--accent)}
.sc-label{font-size:.7rem;font-family:var(--mono);opacity:.5;text-transform:uppercase;margin-top:.2rem}
/* Scrollable list */
.list-scroll{max-height:400px;overflow-y:auto;padding-right:.3rem}
.list-scroll::-webkit-scrollbar{width:4px}
.list-scroll::-webkit-scrollbar-thumb{background:var(--border);border-radius:2px}
/* RESPONSIVE */
@media(max-width:768px){
  .layout{grid-template-columns:1fr}
  .sidebar{position:fixed;left:-260px;z-index:200;transition:left .3s;height:100vh}
  .sidebar.open{left:0}
  .mobile-menu{display:flex;align-items:center;justify-content:center;background:none;border:1px solid var(--border);border-radius:8px;padding:.4rem;cursor:pointer;color:#F2EDE7}
  .form-row{grid-template-columns:1fr}
  .stat-row{grid-template-columns:repeat(2,1fr)}
}
</style>
</head>
<body>

<div class="layout">
  <!-- SIDEBAR -->
  <aside class="sidebar" id="sidebar">
    <div class="sidebar-logo">
      <div class="logo-icon">&lt;/&gt;</div>
      <div><div class="logo-txt">Portfolio Admin</div><div class="logo-sub">GitHub Pages CMS</div></div>
    </div>
    <nav class="sidebar-nav">
      <div class="nav-section">Main</div>
      <div class="nav-item active" data-panel="dashboard"><span class="icon">üìä</span> Dashboard</div>
      <div class="nav-item" data-panel="hero"><span class="icon">üöÄ</span> Hero Section</div>
      <div class="nav-item" data-panel="about"><span class="icon">üë§</span> About Me</div>
      <div class="nav-section">Content</div>
      <div class="nav-item" data-panel="skills"><span class="icon">‚ö°</span> Skills</div>
      <div class="nav-item" data-panel="education"><span class="icon">üéì</span> Education</div>
      <div class="nav-item" data-panel="projects"><span class="icon">üíº</span> Projects</div>
      <div class="nav-section">More</div>
      <div class="nav-item" data-panel="internships"><span class="icon">üè¢</span> Internships</div>
      <div class="nav-item" data-panel="certificates"><span class="icon">üèÖ</span> Certificates</div>
      <div class="nav-item" data-panel="contact"><span class="icon">üìß</span> Contact</div>
      <div class="nav-item" data-panel="themes"><span class="icon">üé®</span> Themes</div>
      <div class="nav-item" data-panel="splash"><span class="icon">‚ú®</span> Splash Screen</div>
    </nav>
    <div class="sidebar-footer">
      <div class="github-section">
        <div class="gh-title">üêô GitHub Deploy</div>
        <input type="text" class="gh-input" id="ghToken" placeholder="GitHub Token (ghp_...)" autocomplete="off">
        <input type="text" class="gh-input" id="ghRepo" placeholder="owner/repo-name">
        <input type="text" class="gh-input" id="ghBranch" placeholder="Branch (main)" value="main">
        <button class="gh-btn" onclick="deployToGitHub()">‚¨Ü Push to GitHub</button>
      </div>
    </div>
  </aside>

  <!-- MAIN -->
  <main class="main">
    <div class="topbar">
      <div style="display:flex;align-items:center;gap:1rem">
        <button class="btn-preview" onclick="window.open('index.html','_blank')">üëÅ Preview</button>
        <div class="topbar-title" id="panelTitle">Dashboard</div>
      </div>
      <div class="topbar-actions">
        <button class="btn-preview" onclick="exportJSON()">‚¨á Export JSON</button>
        <button class="btn-save" onclick="saveAll()">üíæ Save All</button>
      </div>
    </div>

    <div class="content" id="content">

      <!-- ===== DASHBOARD ===== -->
      <div class="panel active" id="panel-dashboard">
        <div class="panel-title">Welcome Back üëã</div>
        <div class="panel-sub">Manage your portfolio content ¬∑ Changes auto-save in memory ¬∑ Push to GitHub to deploy</div>
        <div class="stat-row" id="dashStats"></div>
        <div class="admin-card">
          <div style="font-weight:700;margin-bottom:1rem">Quick Actions</div>
          <div style="display:flex;flex-wrap:wrap;gap:.8rem">
            <button class="btn-save" onclick="nav('projects')">‚ûï Add Project</button>
            <button class="btn-save" style="background:#4F735C" onclick="nav('skills')">‚ö° Update Skills</button>
            <button class="btn-save" style="background:#162660" onclick="nav('education')">üéì Add Education</button>
            <button class="btn-preview" onclick="exportJSON()">üìÑ Download JSON</button>
          </div>
        </div>
        <div class="admin-card">
          <div style="font-weight:700;margin-bottom:.8rem">üìã How to Deploy</div>
          <div style="font-family:var(--mono);font-size:.78rem;opacity:.6;line-height:1.9">
            <div>1. Edit your content in each section using the sidebar</div>
            <div>2. Click <strong style="color:var(--accent)">Save All</strong> to update memory</div>
            <div>3. Enter your GitHub Token + repo in the sidebar</div>
            <div>4. Click <strong style="color:var(--accent)">Push to GitHub</strong> ‚Äî data.json updates live!</div>
            <div>5. GitHub Pages will serve the updated portfolio automatically ‚úÖ</div>
          </div>
        </div>
      </div>

      <!-- ===== HERO ===== -->
      <div class="panel" id="panel-hero">
        <div class="panel-title">Hero Section</div>
        <div class="panel-sub">Configure the main landing section of your portfolio</div>
        <div class="admin-card">
          <div class="form-row">
            <div class="form-group"><label class="form-label">Greeting Text</label><input type="text" class="form-input" id="hero_greeting" placeholder="Hi, Welcome to my Portfolio"></div>
            <div class="form-group"><label class="form-label">Your Name</label><input type="text" class="form-input" id="hero_name"></div>
          </div>
          <div class="form-row single">
            <div class="form-group"><label class="form-label">Typing Texts (comma separated)</label><input type="text" class="form-input" id="hero_typing" placeholder="Full Stack Developer, UI/UX Designer, ..."></div>
          </div>
          <div class="form-row single">
            <div class="form-group"><label class="form-label">Description</label><textarea class="form-textarea" id="hero_desc"></textarea></div>
          </div>
        </div>
      </div>

      <!-- ===== ABOUT ===== -->
      <div class="panel" id="panel-about">
        <div class="panel-title">About Me</div>
        <div class="panel-sub">Your personal introduction and details</div>
        <div class="admin-card">
          <div class="form-row single">
            <div class="form-group"><label class="form-label">About Description</label><textarea class="form-textarea" id="about_desc" style="min-height:120px"></textarea></div>
          </div>
          <div class="divider"></div>
          <div style="font-weight:700;margin-bottom:1rem">Personal Details</div>
          <div id="aboutDetailsContainer"></div>
          <button class="btn-add" onclick="addAboutDetail()">‚ûï Add Detail</button>
          <div class="divider"></div>
          <div style="font-weight:700;margin-bottom:.5rem">Fun Facts (comma separated)</div>
          <input type="text" class="form-input" id="about_funfacts" placeholder="‚òï Coffee-powered, üåô Night owl, ...">
        </div>
      </div>

      <!-- ===== SKILLS ===== -->
      <div class="panel" id="panel-skills">
        <div class="panel-title">Skills</div>
        <div class="panel-sub">Add your technical skills with proficiency levels</div>
        <div id="skillsContainer"></div>
        <button class="btn-add" onclick="addSkill()">‚ûï Add Skill</button>
      </div>

      <!-- ===== EDUCATION ===== -->
      <div class="panel" id="panel-education">
        <div class="panel-title">Education</div>
        <div class="panel-sub">Academic qualifications timeline</div>
        <div id="educationContainer"></div>
        <button class="btn-add" onclick="addEducation()">‚ûï Add Education</button>
      </div>

      <!-- ===== PROJECTS ===== -->
      <div class="panel" id="panel-projects">
        <div class="panel-title">Projects</div>
        <div class="panel-sub">Your portfolio projects with links and details</div>
        <div id="projectsContainer"></div>
        <button class="btn-add" onclick="addProject()">‚ûï Add Project</button>
      </div>

      <!-- ===== INTERNSHIPS ===== -->
      <div class="panel" id="panel-internships">
        <div class="panel-title">Internships</div>
        <div class="panel-sub">Work experience and internships</div>
        <div id="internshipsContainer"></div>
        <button class="btn-add" onclick="addInternship()">‚ûï Add Internship</button>
      </div>

      <!-- ===== CERTIFICATES ===== -->
      <div class="panel" id="panel-certificates">
        <div class="panel-title">Certificates</div>
        <div class="panel-sub">Your certifications and credentials</div>
        <div id="certsContainer"></div>
        <button class="btn-add" onclick="addCert()">‚ûï Add Certificate</button>
      </div>

      <!-- ===== CONTACT ===== -->
      <div class="panel" id="panel-contact">
        <div class="panel-title">Contact & Social</div>
        <div class="panel-sub">How people can reach you</div>
        <div class="admin-card">
          <div style="font-weight:700;margin-bottom:1rem">Contact Info</div>
          <div class="form-row">
            <div class="form-group"><label class="form-label">Email</label><input type="email" class="form-input" id="contact_email"></div>
            <div class="form-group"><label class="form-label">Phone</label><input type="text" class="form-input" id="contact_phone"></div>
          </div>
          <div class="form-row">
            <div class="form-group"><label class="form-label">Location</label><input type="text" class="form-input" id="contact_location"></div>
            <div class="form-group"><label class="form-label">Availability Status</label><input type="text" class="form-input" id="contact_availability"></div>
          </div>
          <div class="divider"></div>
          <div style="font-weight:700;margin-bottom:1rem">Social Links</div>
          <div id="socialContainer"></div>
          <button class="btn-add" onclick="addSocial()">‚ûï Add Social Link</button>
          <div class="divider"></div>
          <div style="font-weight:700;margin-bottom:1rem">Footer</div>
          <div class="form-row">
            <div class="form-group"><label class="form-label">Footer Text</label><input type="text" class="form-input" id="footer_text"></div>
            <div class="form-group"><label class="form-label">Footer Subtext</label><input type="text" class="form-input" id="footer_sub"></div>
          </div>
        </div>
      </div>

      <!-- ===== SPLASH ===== -->
      <div class="panel" id="panel-splash">
        <div class="panel-title">Splash Screen</div>
        <div class="panel-sub">Customize the animated loading screen shown on every visit</div>
        <div class="admin-card">
          <div style="font-weight:700;margin-bottom:1rem">üé¨ Splash Branding</div>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">Logo Text</label>
              <input type="text" class="form-input" id="splash_logoText" placeholder="DEV" maxlength="8">
              <span style="font-size:.7rem;opacity:.4;font-family:var(--mono);display:block;margin-top:.3rem">Displayed as &lt;TEXT/&gt;</span>
            </div>
            <div class="form-group">
              <label class="form-label">Tagline</label>
              <input type="text" class="form-input" id="splash_tagline" placeholder="PORTFOLIO ¬∑ LOADING">
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">Background Color</label>
              <input type="color" class="form-input" id="splash_bgColor" value="#2F2F2F" style="height:48px;padding:.3rem">
            </div>
            <div class="form-group">
              <label class="form-label">Accent / Glow Color</label>
              <input type="color" class="form-input" id="splash_glowColor" value="#F95C4B" style="height:48px;padding:.3rem">
            </div>
          </div>
          <div class="divider"></div>
          <div style="font-weight:700;margin-bottom:.8rem">Live Preview</div>
          <div id="splashPreview" style="border-radius:16px;height:200px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:.5rem;position:relative;overflow:hidden;background:#2F2F2F;transition:background .3s">
            <div style="position:absolute;inset:0;background-image:linear-gradient(rgba(249,92,75,.06) 1px,transparent 1px),linear-gradient(90deg,rgba(249,92,75,.06) 1px,transparent 1px);background-size:40px 40px" id="splashPreviewGrid"></div>
            <div style="font-family:var(--mono);font-size:2rem;font-weight:700;color:#F2EDE7;position:relative;z-index:1"><span id="previewAccentL" style="color:#F95C4B">&lt;</span><span id="previewLogoText">DEV</span><span id="previewAccentR" style="color:#F95C4B">/&gt;</span></div>
            <div id="previewTag" style="font-family:var(--mono);font-size:.65rem;color:rgba(242,237,231,.4);letter-spacing:3px;text-transform:uppercase;position:relative;z-index:1">PORTFOLIO ¬∑ LOADING</div>
            <div style="width:120px;height:2px;background:rgba(255,255,255,.1);border-radius:1px;margin-top:.3rem;position:relative;z-index:1;overflow:hidden">
              <div id="previewBar" style="height:100%;width:65%;background:linear-gradient(90deg,#F95C4B,#F1E4D1);border-radius:1px;transition:background .3s"></div>
            </div>
          </div>
          <div class="divider"></div>
          <button class="btn-save" onclick="saveSplash()" style="width:100%;justify-content:center">üíæ Save Splash Config</button>
          <p style="font-size:.72rem;font-family:var(--mono);opacity:.4;margin-top:.6rem;text-align:center">Saved to browser localStorage ¬∑ applies to this device immediately</p>
        </div>
      </div>

      <!-- ===== THEMES ===== -->      <div class="panel" id="panel-themes">
        <div class="panel-title">Themes</div>
        <div class="panel-sub">Choose the color theme for your portfolio</div>
        <div class="admin-card">
          <div class="theme-grid-admin" id="themeGrid"></div>
          <div class="divider"></div>
          <div style="font-weight:700;margin-bottom:.5rem">Marquee Items (comma separated)</div>
          <textarea class="form-textarea" id="marquee_items" style="min-height:80px" placeholder="üöÄ Open to Opportunities, ‚ö° Full Stack Dev, ..."></textarea>
        </div>
      </div>

    </div><!-- /content -->
  </main>
</div>

<!-- Status Bar -->
<div class="status-bar" id="statusBar">
  <div class="status-dot" id="statusDot"></div>
  <span id="statusMsg">Saved!</span>
</div>

<script>
// ==================== EMBEDDED FALLBACK DATA ====================
const FALLBACK_DATA = {
  theme: "cloud",
  hero: {
    greeting: "Hi, Welcome to my Portfolio",
    name: "Alex Rivera",
    typingTexts: ["Full Stack Developer","UI/UX Designer","Open Source Contributor","Problem Solver","Tech Enthusiast"],
    description: "I craft beautiful digital experiences that live at the intersection of art and engineering. Let's build something extraordinary together."
  },
  marquee: { items: ["üöÄ Open to Opportunities","‚ö° Full Stack Dev","üé® UI/UX Design","üåê Web3 Ready","‚òÅÔ∏è Cloud Native","ü§ñ AI/ML Enthusiast","üì± Mobile First","üî• React & Node.js","üõ†Ô∏è DevOps Savvy","‚ú® Creative Coder"] },
  about: {
    title: "About Me",
    description: "I'm a passionate full-stack developer with 3+ years of experience building scalable web applications. I love turning complex problems into elegant, user-friendly solutions.",
    details: [
      { label:"Name", value:"Alex Rivera", icon:"üë§" }, { label:"Age", value:"24 Years", icon:"üéÇ" },
      { label:"Location", value:"San Francisco, CA", icon:"üìç" }, { label:"Email", value:"alex@portfolio.dev", icon:"üìß" },
      { label:"Degree", value:"B.Tech Computer Science", icon:"üéì" }, { label:"Status", value:"Available for Hire", icon:"‚úÖ" }
    ],
    funFacts: ["‚òï Coffee-powered developer","üåô Night owl coder","üéÆ Gamer on weekends","üìö Avid tech reader"]
  },
  skills: [
    { name:"React.js", level:92, color:"#61DAFB", icon:"‚öõÔ∏è", category:"Frontend" },
    { name:"Node.js", level:88, color:"#68A063", icon:"üü¢", category:"Backend" },
    { name:"TypeScript", level:85, color:"#3178C6", icon:"üìò", category:"Language" },
    { name:"Python", level:80, color:"#FFD43B", icon:"üêç", category:"Language" },
    { name:"MongoDB", level:82, color:"#47A248", icon:"üçÉ", category:"Database" },
    { name:"Docker", level:75, color:"#2496ED", icon:"üê≥", category:"DevOps" },
    { name:"AWS", level:70, color:"#FF9900", icon:"‚òÅÔ∏è", category:"Cloud" },
    { name:"Figma", level:88, color:"#F24E1E", icon:"üé®", category:"Design" },
    { name:"Git/GitHub", level:95, color:"#F05032", icon:"üîÄ", category:"Tools" },
    { name:"Next.js", level:83, color:"#000000", icon:"‚ñ≤", category:"Frontend" }
  ],
  education: [
    { degree:"B.Tech in Computer Science", institution:"Stanford University", location:"Stanford, CA", year:"2019 ‚Äì 2023", grade:"GPA: 3.9/4.0", description:"Specialized in Software Engineering and Artificial Intelligence.", achievements:["Dean's List 4 semesters","Hackathon Winner 2022","Research Assistant - AI Lab"] },
    { degree:"Higher Secondary (12th)", institution:"Valley View High School", location:"San Jose, CA", year:"2017 ‚Äì 2019", grade:"Score: 96%", description:"Science stream with Computer Science as major subject.", achievements:["Valedictorian 2019","Science Olympiad Gold","Coding Club President"] }
  ],
  projects: [
    { title:"NexusChat", year:"2024", category:"Full Stack", description:"Real-time messaging platform with AI-powered suggestions and end-to-end encryption.", tech:["React","Node.js","Socket.io","MongoDB"], repo:"#", demo:"#", stars:"2.4k", featured:true, color:"#F95C4B" },
    { title:"CloudCanvas", year:"2024", category:"SaaS", description:"Collaborative design tool with real-time editing and AI-assisted suggestions.", tech:["Next.js","TypeScript","WebGL","AWS S3"], repo:"#", demo:"#", stars:"1.8k", featured:true, color:"#4F735C" },
    { title:"DataPulse", year:"2023", category:"Analytics", description:"Advanced analytics dashboard with ML-powered predictions.", tech:["Vue.js","Python","FastAPI","PostgreSQL"], repo:"#", demo:"#", stars:"956", featured:false, color:"#162660" }
  ],
  internships: [
    { company:"Google", role:"Software Engineering Intern", duration:"May 2023 ‚Äì Aug 2023", location:"Mountain View, CA", type:"On-site", description:"Worked on Google Cloud's internal developer tools team.", tech:["Go","Kubernetes","gRPC","BigQuery"], logo:"G", color:"#4285F4", achievements:["Reduced CI/CD time by 40%","Shipped feature to 1M+ users"], mentorNote:"Exceptional problem-solving skills." },
    { company:"Stripe", role:"Frontend Engineering Intern", duration:"Jan 2023 ‚Äì Apr 2023", location:"San Francisco, CA", type:"Hybrid", description:"Built new payment flow components for Stripe Dashboard.", tech:["React","TypeScript","Jest"], logo:"S", color:"#635BFF", achievements:["A11y score 72‚Üí98","Zero prod bugs shipped"], mentorNote:"Outstanding UI/UX sensibility." }
  ],
  certificates: [
    { title:"AWS Certified Solutions Architect", issuer:"Amazon Web Services", date:"March 2024", credentialId:"AWS-SAA-2024-AR", description:"Professional-level certification validating expertise in designing distributed systems.", color:"#FF9900", icon:"‚òÅÔ∏è", verifyUrl:"#" },
    { title:"Google Professional Cloud Developer", issuer:"Google Cloud", date:"January 2024", credentialId:"GCP-PCD-2024", description:"Validates ability to build scalable applications using Google Cloud.", color:"#4285F4", icon:"üåê", verifyUrl:"#" }
  ],
  contact: { email:"alex@portfolio.dev", phone:"+1 (415) 555-0192", location:"San Francisco, CA", availability:"Available for freelance & full-time roles" },
  social: [
    { name:"GitHub", url:"#", icon:"github" }, { name:"LinkedIn", url:"#", icon:"linkedin" },
    { name:"Twitter", url:"#", icon:"twitter" }
  ],
  footer: { text:"Crafted with ‚ù§Ô∏è by Alex Rivera", subtext:"Powered by GitHub Pages & Vanilla JS" }
};

let DATA = {};

// ==================== LOAD ====================
async function safeJsonFetch(url) {
  const r = await fetch(url + '?' + Date.now());
  const ct = r.headers.get('content-type') || '';
  if (!r.ok || !ct.includes('json')) throw new Error('Not JSON: ' + r.status + ' ' + ct);
  return r.json();
}

async function loadData() {
  try {
    DATA = await safeJsonFetch('data.json');
    showStatus('‚úÖ Loaded data.json');
  } catch(e) {
    console.warn('Using embedded fallback data:', e.message);
    DATA = JSON.parse(JSON.stringify(FALLBACK_DATA)); // deep clone
    showStatus('‚ÑπÔ∏è Using default data ‚Äî edit and save to create your own', 'warn');
  }
  populateAll();
}

// ==================== NAVIGATION ====================
function nav(panel) {
  document.querySelectorAll('.nav-item').forEach(n => { n.classList.toggle('active', n.dataset.panel === panel); });
  document.querySelectorAll('.panel').forEach(p => { p.classList.toggle('active', p.id === 'panel-' + panel); });
  document.getElementById('panelTitle').textContent = panel.charAt(0).toUpperCase() + panel.slice(1);
}
document.querySelectorAll('.nav-item').forEach(item => {
  item.addEventListener('click', () => nav(item.dataset.panel));
});

// ==================== STATUS ====================
function showStatus(msg, type = 'ok') {
  const bar = document.getElementById('statusBar');
  const dot = document.getElementById('statusDot');
  document.getElementById('statusMsg').textContent = msg;
  dot.style.background = type === 'ok' ? '#4F735C' : type === 'warn' ? '#F95C4B' : '#F59E0B';
  bar.classList.add('show');
  setTimeout(() => bar.classList.remove('show'), 3000);
}

// ==================== POPULATE ====================
function populateAll() {
  populateDashboard();
  populateHero();
  populateAbout();
  populateSkills();
  populateEducation();
  populateProjects();
  populateInternships();
  populateCerts();
  populateContact();
  populateThemes();
  populateSplash();
}

function populateDashboard() {
  const stats = [
    { num: (DATA.skills||[]).length, label: 'Skills' },
    { num: (DATA.projects||[]).length, label: 'Projects' },
    { num: (DATA.education||[]).length, label: 'Education' },
    { num: (DATA.certificates||[]).length, label: 'Certificates' }
  ];
  document.getElementById('dashStats').innerHTML = stats.map(s => `
    <div class="stat-card"><div class="sc-num">${s.num}</div><div class="sc-label">${s.label}</div></div>`).join('');
}

function populateHero() {
  const h = DATA.hero || {};
  document.getElementById('hero_greeting').value = h.greeting || '';
  document.getElementById('hero_name').value = h.name || '';
  document.getElementById('hero_typing').value = (h.typingTexts || []).join(', ');
  document.getElementById('hero_desc').value = h.description || '';
}

function populateAbout() {
  const a = DATA.about || {};
  document.getElementById('about_desc').value = a.description || '';
  document.getElementById('about_funfacts').value = (a.funFacts || []).join(', ');
  renderAboutDetails(a.details || []);
}

function renderAboutDetails(details) {
  const c = document.getElementById('aboutDetailsContainer');
  c.innerHTML = details.map((d, i) => `
    <div class="form-row" style="align-items:end" data-detail="${i}">
      <div class="form-group"><label class="form-label">Icon</label><input type="text" class="form-input" value="${d.icon||''}" data-field="icon" style="font-size:1.1rem"></div>
      <div class="form-group"><label class="form-label">Label</label><input type="text" class="form-input" value="${d.label||''}" data-field="label"></div>
      <div class="form-group"><label class="form-label">Value</label><input type="text" class="form-input" value="${d.value||''}" data-field="value"></div>
      <div class="form-group" style="flex:0"><button class="btn-icon delete" onclick="removeAboutDetail(${i})">‚úï</button></div>
    </div>`).join('');
}

function addAboutDetail() {
  if (!DATA.about) DATA.about = {};
  DATA.about.details = DATA.about.details || [];
  DATA.about.details.push({ icon: '‚ú®', label: 'Label', value: 'Value' });
  renderAboutDetails(DATA.about.details);
}
function removeAboutDetail(i) {
  DATA.about.details.splice(i, 1);
  renderAboutDetails(DATA.about.details);
}

function populateSkills() {
  renderSkills(DATA.skills || []);
}
function renderSkills(skills) {
  document.getElementById('skillsContainer').innerHTML = skills.map((s, i) => `
    <div class="admin-card" style="margin-bottom:.8rem">
      <div class="card-header" style="cursor:default">
        <span class="card-header-title"><span style="font-size:1.1rem">${s.icon||'‚ö°'}</span> ${s.name}</span>
        <div class="card-actions">
          <button class="btn-icon delete" onclick="removeItem('skills',${i})">‚úï Remove</button>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group"><label class="form-label">Icon</label><input type="text" class="form-input" value="${s.icon||''}" onchange="updateItem('skills',${i},'icon',this.value)"></div>
        <div class="form-group"><label class="form-label">Name</label><input type="text" class="form-input" value="${s.name||''}" onchange="updateItem('skills',${i},'name',this.value)"></div>
        <div class="form-group"><label class="form-label">Level %</label><input type="number" class="form-input" min="0" max="100" value="${s.level||0}" onchange="updateItem('skills',${i},'level',parseInt(this.value))"></div>
        <div class="form-group"><label class="form-label">Color</label><input type="color" class="form-input" style="height:44px;padding:.2rem" value="${s.color||'#F95C4B'}" onchange="updateItem('skills',${i},'color',this.value)"></div>
        <div class="form-group"><label class="form-label">Category</label><input type="text" class="form-input" value="${s.category||''}" onchange="updateItem('skills',${i},'category',this.value)"></div>
      </div>
    </div>`).join('');
}
function addSkill() {
  DATA.skills = DATA.skills || [];
  DATA.skills.push({ icon: '‚ö°', name: 'New Skill', level: 80, color: '#F95C4B', category: 'Other' });
  renderSkills(DATA.skills);
}

function populateEducation() {
  renderEducation(DATA.education || []);
}
function renderEducation(edu) {
  document.getElementById('educationContainer').innerHTML = edu.map((e, i) => `
    <div class="admin-card">
      <div class="card-header">
        <span class="card-header-title">üéì ${e.degree || 'Education'}</span>
        <button class="btn-icon delete" onclick="removeItem('education',${i})">‚úï</button>
      </div>
      <div class="form-row">
        <div class="form-group"><label class="form-label">Degree/Course</label><input type="text" class="form-input" value="${e.degree||''}" onchange="updateItem('education',${i},'degree',this.value)"></div>
        <div class="form-group"><label class="form-label">Institution</label><input type="text" class="form-input" value="${e.institution||''}" onchange="updateItem('education',${i},'institution',this.value)"></div>
      </div>
      <div class="form-row">
        <div class="form-group"><label class="form-label">Year</label><input type="text" class="form-input" value="${e.year||''}" onchange="updateItem('education',${i},'year',this.value)"></div>
        <div class="form-group"><label class="form-label">Location</label><input type="text" class="form-input" value="${e.location||''}" onchange="updateItem('education',${i},'location',this.value)"></div>
        <div class="form-group"><label class="form-label">Grade/GPA</label><input type="text" class="form-input" value="${e.grade||''}" onchange="updateItem('education',${i},'grade',this.value)"></div>
      </div>
      <div class="form-row single">
        <div class="form-group"><label class="form-label">Description</label><textarea class="form-textarea" style="min-height:70px" onchange="updateItem('education',${i},'description',this.value)">${e.description||''}</textarea></div>
      </div>
      <div class="form-row single">
        <div class="form-group"><label class="form-label">Achievements (comma separated)</label><input type="text" class="form-input" value="${(e.achievements||[]).join(', ')}" onchange="updateItem('education',${i},'achievements',this.value.split(',').map(x=>x.trim()).filter(Boolean))"></div>
      </div>
    </div>`).join('');
}
function addEducation() {
  DATA.education = DATA.education || [];
  DATA.education.push({ degree: 'New Degree', institution: '', year: '2024', location: '', grade: '', description: '', achievements: [] });
  renderEducation(DATA.education);
}

function populateProjects() {
  renderProjects(DATA.projects || []);
}
function renderProjects(projects) {
  document.getElementById('projectsContainer').innerHTML = projects.map((p, i) => `
    <div class="admin-card">
      <div class="card-header">
        <span class="card-header-title">üíº ${p.title || 'Project'}</span>
        <button class="btn-icon delete" onclick="removeItem('projects',${i})">‚úï</button>
      </div>
      <div class="form-row">
        <div class="form-group"><label class="form-label">Title</label><input type="text" class="form-input" value="${p.title||''}" onchange="updateItem('projects',${i},'title',this.value)"></div>
        <div class="form-group"><label class="form-label">Year</label><input type="text" class="form-input" value="${p.year||''}" onchange="updateItem('projects',${i},'year',this.value)"></div>
        <div class="form-group"><label class="form-label">Category</label><input type="text" class="form-input" value="${p.category||''}" onchange="updateItem('projects',${i},'category',this.value)"></div>
        <div class="form-group"><label class="form-label">Accent Color</label><input type="color" class="form-input" style="height:44px;padding:.2rem" value="${p.color||'#F95C4B'}" onchange="updateItem('projects',${i},'color',this.value)"></div>
      </div>
      <div class="form-row single">
        <div class="form-group"><label class="form-label">Description</label><textarea class="form-textarea" style="min-height:80px" onchange="updateItem('projects',${i},'description',this.value)">${p.description||''}</textarea></div>
      </div>
      <div class="form-row">
        <div class="form-group"><label class="form-label">GitHub Repo URL</label><input type="url" class="form-input" value="${p.repo||''}" onchange="updateItem('projects',${i},'repo',this.value)"></div>
        <div class="form-group"><label class="form-label">Live Demo URL</label><input type="url" class="form-input" value="${p.demo||''}" onchange="updateItem('projects',${i},'demo',this.value)"></div>
      </div>
      <div class="form-row">
        <div class="form-group"><label class="form-label">Tech Stack (comma separated)</label><input type="text" class="form-input" value="${(p.tech||[]).join(', ')}" onchange="updateItem('projects',${i},'tech',this.value.split(',').map(x=>x.trim()).filter(Boolean))"></div>
        <div class="form-group"><label class="form-label">Stars</label><input type="text" class="form-input" value="${p.stars||''}" onchange="updateItem('projects',${i},'stars',this.value)"></div>
        <div class="form-group"><label class="form-label">Featured</label>
          <select class="form-select" onchange="updateItem('projects',${i},'featured',this.value==='true')">
            <option value="true" ${p.featured?'selected':''}>Yes</option>
            <option value="false" ${!p.featured?'selected':''}>No</option>
          </select>
        </div>
      </div>
    </div>`).join('');
}
function addProject() {
  DATA.projects = DATA.projects || [];
  DATA.projects.push({ title: 'New Project', year: '2024', category: 'Web', description: '', repo: '', demo: '', tech: [], stars: '', featured: false, color: '#F95C4B' });
  renderProjects(DATA.projects);
}

function populateInternships() {
  renderInternships(DATA.internships || []);
}
function renderInternships(interns) {
  document.getElementById('internshipsContainer').innerHTML = interns.map((n, i) => `
    <div class="admin-card">
      <div class="card-header">
        <span class="card-header-title">üè¢ ${n.company||'Company'}</span>
        <button class="btn-icon delete" onclick="removeItem('internships',${i})">‚úï</button>
      </div>
      <div class="form-row">
        <div class="form-group"><label class="form-label">Company</label><input type="text" class="form-input" value="${n.company||''}" onchange="updateItem('internships',${i},'company',this.value)"></div>
        <div class="form-group"><label class="form-label">Role</label><input type="text" class="form-input" value="${n.role||''}" onchange="updateItem('internships',${i},'role',this.value)"></div>
        <div class="form-group"><label class="form-label">Logo Letter</label><input type="text" class="form-input" value="${n.logo||''}" onchange="updateItem('internships',${i},'logo',this.value)" maxlength="2"></div>
        <div class="form-group"><label class="form-label">Color</label><input type="color" class="form-input" style="height:44px;padding:.2rem" value="${n.color||'#F95C4B'}" onchange="updateItem('internships',${i},'color',this.value)"></div>
      </div>
      <div class="form-row">
        <div class="form-group"><label class="form-label">Duration</label><input type="text" class="form-input" value="${n.duration||''}" onchange="updateItem('internships',${i},'duration',this.value)"></div>
        <div class="form-group"><label class="form-label">Location</label><input type="text" class="form-input" value="${n.location||''}" onchange="updateItem('internships',${i},'location',this.value)"></div>
        <div class="form-group"><label class="form-label">Type</label>
          <select class="form-select" onchange="updateItem('internships',${i},'type',this.value)">
            <option ${n.type==='On-site'?'selected':''}>On-site</option>
            <option ${n.type==='Remote'?'selected':''}>Remote</option>
            <option ${n.type==='Hybrid'?'selected':''}>Hybrid</option>
          </select>
        </div>
      </div>
      <div class="form-row single">
        <div class="form-group"><label class="form-label">Description</label><textarea class="form-textarea" style="min-height:70px" onchange="updateItem('internships',${i},'description',this.value)">${n.description||''}</textarea></div>
      </div>
      <div class="form-row">
        <div class="form-group"><label class="form-label">Achievements (comma separated)</label><input type="text" class="form-input" value="${(n.achievements||[]).join(', ')}" onchange="updateItem('internships',${i},'achievements',this.value.split(',').map(x=>x.trim()).filter(Boolean))"></div>
        <div class="form-group"><label class="form-label">Mentor Note</label><input type="text" class="form-input" value="${n.mentorNote||''}" onchange="updateItem('internships',${i},'mentorNote',this.value)"></div>
      </div>
      <div class="form-row single">
        <div class="form-group"><label class="form-label">Tech Stack (comma separated)</label><input type="text" class="form-input" value="${(n.tech||[]).join(', ')}" onchange="updateItem('internships',${i},'tech',this.value.split(',').map(x=>x.trim()).filter(Boolean))"></div>
      </div>
    </div>`).join('');
}
function addInternship() {
  DATA.internships = DATA.internships || [];
  DATA.internships.push({ company: 'Company', role: 'Role', logo: 'C', color: '#4285F4', duration: '2024', location: '', type: 'On-site', description: '', tech: [], achievements: [], mentorNote: '' });
  renderInternships(DATA.internships);
}

function populateCerts() {
  renderCerts(DATA.certificates || []);
}
function renderCerts(certs) {
  document.getElementById('certsContainer').innerHTML = certs.map((c, i) => `
    <div class="admin-card">
      <div class="card-header">
        <span class="card-header-title">üèÖ ${c.title||'Certificate'}</span>
        <button class="btn-icon delete" onclick="removeItem('certificates',${i})">‚úï</button>
      </div>
      <div class="form-row">
        <div class="form-group"><label class="form-label">Title</label><input type="text" class="form-input" value="${c.title||''}" onchange="updateItem('certificates',${i},'title',this.value)"></div>
        <div class="form-group"><label class="form-label">Issuer</label><input type="text" class="form-input" value="${c.issuer||''}" onchange="updateItem('certificates',${i},'issuer',this.value)"></div>
        <div class="form-group"><label class="form-label">Date</label><input type="text" class="form-input" value="${c.date||''}" onchange="updateItem('certificates',${i},'date',this.value)"></div>
        <div class="form-group"><label class="form-label">Icon Emoji</label><input type="text" class="form-input" value="${c.icon||'üèÖ'}" onchange="updateItem('certificates',${i},'icon',this.value)"></div>
        <div class="form-group"><label class="form-label">Color</label><input type="color" class="form-input" style="height:44px;padding:.2rem" value="${c.color||'#F95C4B'}" onchange="updateItem('certificates',${i},'color',this.value)"></div>
      </div>
      <div class="form-row">
        <div class="form-group"><label class="form-label">Credential ID</label><input type="text" class="form-input" value="${c.credentialId||''}" onchange="updateItem('certificates',${i},'credentialId',this.value)"></div>
        <div class="form-group"><label class="form-label">Verify URL</label><input type="url" class="form-input" value="${c.verifyUrl||''}" onchange="updateItem('certificates',${i},'verifyUrl',this.value)"></div>
      </div>
      <div class="form-row single">
        <div class="form-group"><label class="form-label">Description</label><textarea class="form-textarea" style="min-height:70px" onchange="updateItem('certificates',${i},'description',this.value)">${c.description||''}</textarea></div>
      </div>
    </div>`).join('');
}
function addCert() {
  DATA.certificates = DATA.certificates || [];
  DATA.certificates.push({ title: 'New Certificate', issuer: '', date: '2024', icon: 'üèÖ', color: '#F95C4B', credentialId: '', verifyUrl: '', description: '' });
  renderCerts(DATA.certificates);
}

function populateContact() {
  const c = DATA.contact || {};
  document.getElementById('contact_email').value = c.email || '';
  document.getElementById('contact_phone').value = c.phone || '';
  document.getElementById('contact_location').value = c.location || '';
  document.getElementById('contact_availability').value = c.availability || '';
  const f = DATA.footer || {};
  document.getElementById('footer_text').value = f.text || '';
  document.getElementById('footer_sub').value = f.subtext || '';
  renderSocials(DATA.social || []);
}
function renderSocials(socials) {
  document.getElementById('socialContainer').innerHTML = socials.map((s, i) => `
    <div class="form-row" style="align-items:end;margin-bottom:.5rem">
      <div class="form-group"><label class="form-label">Platform</label><input type="text" class="form-input" value="${s.name||''}" onchange="updateItem('social',${i},'name',this.value)"></div>
      <div class="form-group"><label class="form-label">URL</label><input type="url" class="form-input" value="${s.url||''}" onchange="updateItem('social',${i},'url',this.value)"></div>
      <div class="form-group"><label class="form-label">Icon Key</label><input type="text" class="form-input" value="${s.icon||''}" onchange="updateItem('social',${i},'icon',this.value)" placeholder="github, linkedin..."></div>
      <div class="form-group" style="flex:0"><button class="btn-icon delete" onclick="removeItem('social',${i});renderSocials(DATA.social)">‚úï</button></div>
    </div>`).join('');
}
function addSocial() {
  DATA.social = DATA.social || [];
  DATA.social.push({ name: 'Platform', url: '', icon: 'github' });
  renderSocials(DATA.social);
}

const themes = [
  { id: 'cloud', name: '‚òÅÔ∏è Cloud', bg: '#F2EDE7', text: '#2F2F2F', colors: ['#F2EDE7', '#F95C4B', '#4F735C'] },
  { id: 'midnight', name: 'üåô Midnight', bg: '#2F2F2F', text: '#F2EDE7', colors: ['#2F2F2F', '#F95C4B', '#9FBD8A'] },
  { id: 'forest', name: 'üåø Forest', bg: '#1E2D25', text: '#9FBD8A', colors: ['#1E2D25', '#4F735C', '#9FBD8A'] },
  { id: 'royal', name: 'üëë Royal', bg: '#162660', text: '#D0E6FD', colors: ['#0C1535', '#162660', '#D0E6FD'] },
  { id: 'coral', name: 'ü™∏ Coral', bg: '#FFF5F3', text: '#F95C4B', colors: ['#FFF5F3', '#F95C4B', '#00484D'] },
  { id: 'teal', name: 'üåä Teal', bg: '#00484D', text: '#9FBD8A', colors: ['#002A2D', '#00484D', '#9FBD8A'] }
];

function populateThemes() {
  const cur = DATA.theme || 'cloud';
  document.getElementById('themeGrid').innerHTML = themes.map(t => `
    <div class="theme-swatch ${t.id === cur ? 'selected' : ''}" style="background:${t.bg};color:${t.text}" onclick="selectTheme('${t.id}')" data-theme-id="${t.id}">
      <div class="theme-swatch-name">${t.name}</div>
      <div class="theme-swatch-colors">${t.colors.map(c => `<div class="swatch-dot" style="background:${c}"></div>`).join('')}</div>
      ${t.id === cur ? '<div class="theme-checkmark">‚úì</div>' : ''}
    </div>`).join('');
  document.getElementById('marquee_items').value = ((DATA.marquee || {}).items || []).join(', ');
}
function selectTheme(id) {
  DATA.theme = id;
  document.querySelectorAll('[data-theme-id]').forEach(el => {
    const isSelected = el.dataset.themeId === id;
    el.classList.toggle('selected', isSelected);
    el.style.border = isSelected ? '2px solid #F95C4B' : '2px solid transparent';
    el.innerHTML = el.innerHTML.replace(/<div class="theme-checkmark">‚úì<\/div>/g, '');
    if (isSelected) el.innerHTML += '<div class="theme-checkmark">‚úì</div>';
  });
  showStatus('‚úì Theme selected: ' + id);
}

// ==================== HELPERS ====================
function updateItem(arr, idx, field, val) {
  if (!DATA[arr]) DATA[arr] = [];
  DATA[arr][idx][field] = val;
}
function removeItem(arr, idx) {
  DATA[arr].splice(idx, 1);
  // Re-render
  const renderMap = { skills: () => renderSkills(DATA.skills||[]), education: () => renderEducation(DATA.education||[]), projects: () => renderProjects(DATA.projects||[]), internships: () => renderInternships(DATA.internships||[]), certificates: () => renderCerts(DATA.certificates||[]), social: () => renderSocials(DATA.social||[]) };
  if (renderMap[arr]) renderMap[arr]();
}

// ==================== SAVE ALL ====================
function saveAll() {
  // Hero
  const h = DATA.hero || {};
  h.greeting = document.getElementById('hero_greeting').value;
  h.name = document.getElementById('hero_name').value;
  h.typingTexts = document.getElementById('hero_typing').value.split(',').map(x => x.trim()).filter(Boolean);
  h.description = document.getElementById('hero_desc').value;
  DATA.hero = h;

  // About
  const a = DATA.about || {};
  a.description = document.getElementById('about_desc').value;
  a.funFacts = document.getElementById('about_funfacts').value.split(',').map(x => x.trim()).filter(Boolean);
  // Collect details from DOM
  const detailRows = document.querySelectorAll('[data-detail]');
  const newDetails = [];
  detailRows.forEach(row => {
    const fields = row.querySelectorAll('[data-field]');
    const obj = {};
    fields.forEach(f => { obj[f.dataset.field] = f.value; });
    if (obj.label) newDetails.push(obj);
  });
  a.details = newDetails;
  DATA.about = a;

  // Contact
  DATA.contact = {
    email: document.getElementById('contact_email').value,
    phone: document.getElementById('contact_phone').value,
    location: document.getElementById('contact_location').value,
    availability: document.getElementById('contact_availability').value
  };

  // Footer
  DATA.footer = {
    text: document.getElementById('footer_text').value,
    subtext: document.getElementById('footer_sub').value
  };

  // Marquee
  const mqItems = document.getElementById('marquee_items').value.split(',').map(x => x.trim()).filter(Boolean);
  if (mqItems.length) DATA.marquee = { items: mqItems };

  populateDashboard();
  showStatus('‚úì All changes saved in memory!');
}

// ==================== EXPORT ====================
function exportJSON() {
  saveAll();
  const blob = new Blob([JSON.stringify(DATA, null, 2)], { type: 'application/json' });
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = 'data.json';
  a.click();
  showStatus('‚¨á data.json downloaded!');
}

// ==================== GITHUB DEPLOY ====================
async function deployToGitHub() {
  const token = document.getElementById('ghToken').value.trim();
  const repo = document.getElementById('ghRepo').value.trim();
  const branch = document.getElementById('ghBranch').value.trim() || 'main';
  if (!token || !repo) { showStatus('‚ö†Ô∏è Enter GitHub Token & Repo name', 'warn'); return; }

  saveAll();
  const content = btoa(unescape(encodeURIComponent(JSON.stringify(DATA, null, 2))));
  const path = 'data.json';
  const apiUrl = `https://api.github.com/repos/${repo}/contents/${path}`;

  try {
    showStatus('‚è≥ Connecting to GitHub...', 'info');
    // Get current file SHA
    let sha = '';
    try {
      const getRes = await fetch(apiUrl, { headers: { Authorization: `token ${token}`, Accept: 'application/vnd.github.v3+json' } });
      if (getRes.ok) { const d = await getRes.json(); sha = d.sha; }
    } catch {}

    const body = { message: 'üöÄ Update portfolio data via admin panel', content, branch };
    if (sha) body.sha = sha;

    const res = await fetch(apiUrl, {
      method: 'PUT',
      headers: { Authorization: `token ${token}`, Accept: 'application/vnd.github.v3+json', 'Content-Type': 'application/json' },
      body: JSON.stringify(body)
    });

    if (res.ok) {
      showStatus('‚úÖ Deployed to GitHub! Live in ~30s');
    } else {
      const err = await res.json();
      showStatus('‚ùå GitHub Error: ' + (err.message || 'Unknown'), 'warn');
    }
  } catch(e) {
    showStatus('‚ùå Network error: ' + e.message, 'warn');
  }
}

// ==================== START ====================
// ==================== SPLASH PANEL ====================
function populateSplash() {
  let cfg = {};
  try { cfg = JSON.parse(localStorage.getItem('portfolioSplash') || '{}'); } catch(e) {}
  document.getElementById('splash_logoText').value = cfg.logoText || 'DEV';
  document.getElementById('splash_tagline').value = cfg.tagline || 'PORTFOLIO ¬∑ LOADING';
  document.getElementById('splash_bgColor').value = cfg.bgColor || '#2F2F2F';
  document.getElementById('splash_glowColor').value = cfg.glowColor || '#F95C4B';
  updateSplashPreview();
}

function updateSplashPreview() {
  const bg = document.getElementById('splash_bgColor').value;
  const glow = document.getElementById('splash_glowColor').value;
  const logo = document.getElementById('splash_logoText').value || 'DEV';
  const tag = document.getElementById('splash_tagline').value || 'PORTFOLIO ¬∑ LOADING';
  document.getElementById('splashPreview').style.background = bg;
  document.getElementById('previewLogoText').textContent = logo;
  document.getElementById('previewTag').textContent = tag.toUpperCase();
  document.getElementById('previewAccentL').style.color = glow;
  document.getElementById('previewAccentR').style.color = glow;
  document.getElementById('previewBar').style.background = `linear-gradient(90deg,${glow},#F1E4D1)`;
  // Update grid overlay color
  const r = parseInt(glow.slice(1,3),16), g2 = parseInt(glow.slice(3,5),16), b = parseInt(glow.slice(5,7),16);
  document.getElementById('splashPreviewGrid').style.backgroundImage =
    `linear-gradient(rgba(${r},${g2},${b},.06) 1px,transparent 1px),linear-gradient(90deg,rgba(${r},${g2},${b},.06) 1px,transparent 1px)`;
}

function saveSplash() {
  const cfg = {
    logoText: document.getElementById('splash_logoText').value || 'DEV',
    tagline: document.getElementById('splash_tagline').value || 'PORTFOLIO ¬∑ LOADING',
    bgColor: document.getElementById('splash_bgColor').value,
    glowColor: document.getElementById('splash_glowColor').value
  };
  try {
    localStorage.setItem('portfolioSplash', JSON.stringify(cfg));
    showStatus('‚úÖ Splash config saved! Refresh portfolio to see changes.');
  } catch(e) {
    showStatus('‚ö†Ô∏è Could not save to localStorage: ' + e.message, 'warn');
  }
}

// Live preview update on input change
document.addEventListener('input', e => {
  if (['splash_logoText','splash_tagline','splash_bgColor','splash_glowColor'].includes(e.target.id)) {
    updateSplashPreview();
  }
});

loadData();
</script>
</body>
</html>
